CC98PostMachine V0.1
===============

##介绍
ZJU的校网论坛CC98活跃度不错。论坛只对校内网开放，而且账号跟学生绑定，每个学生注册的账号数量有限。『十大』是CC98的经典项目：基于关注的人数（回帖的用户数而不是回帖的数量）用算法求出24小时内最火爆的十个发帖。很多同学都会浏览十大，关注论坛动态。


故事就是从十大引出的。有的社团在宣传活动时，为了扩大宣传面，会动员成员发动小马甲顶贴上十大。这种违背社区自然发展轨迹的手段，强奸了关注十大贴的用户的意愿，阻碍了信息的自由流动。

于是萌生了完成一个批量发帖的机器，以其人之道还治其人之身的想法。在下次十大被宣传贴攻占时，能有反击的工具。

工具的用途很简单：使用不同的用户身份模拟真人论坛回帖，增加帖子关注度，以抵抗宣传贴。流程如下：提前收集各路亲朋好友的用户信息（cookie）作为预备水军，灌水时，在命令行参数中制定目标贴，即可实现随机顺序的用户自动顶贴。鉴于现在的功能是顶贴竞争十大，设计的顶贴策略是一个马甲发一条评论。以后可以考虑增加灵活的配置方案，实现更多功能。

介于这个工具本身的罪恶的攻击属性，在此强调，工程仅供学习交流和对抗宣传贴。

##使用说明

###1.准备顶贴用户

发帖的请求为POST请求，系统验证信息中需要有用户的username，userid和hash后的password，这些都能从cookie中获得。将信息抽取出来后，填入`users.yml`文件，由于该文件涉及用户隐私信息，项目中设置了.gitignore，不会上传到repo中。可以参照`users.yml.example`的格式自行修改。

###2.准备评论

在`comments`文件中，设置用户评论的内容，每行一条。现在的设计不保证评论的顺序，所以尽量是上下文无关的通用评论。

###3.执行

来到CC98PostMachine的工作目录，执行：

```
ruby fire.rb BOARDID POSTID [SPEED]
```

其中`BOARDID`和`POSTID`可以在浏览器的地址栏的相关帖子的URL中找到，`SPEED`是设定的两个回帖之间的间隔时间，实际回帖时间做了如下的模糊：`SPEED + random(SPEED)`。


> Usage: ruby  $PATH/fire.rb  boardid  postid [speed]

> boardid and postid can be find in the url of certain post, and boardid is a number less than 1000

> speed is the time gap unit between two posts, it may be 10(s)


##下一步：

###version 0.2

* 留心问同学要些CC98的马甲

* 整理代码结构，解耦，增加配置灵活性，写的更ruby一点

* 整理README的说明

###后续版本

* 写一个使用账号密码获取cookie的工具，原则上不存储密码，而是将登陆后的cookie信息保存下来。将发送所需的cookie信息迁移到MySQL中。

* 设计灵活可控的发帖内容管理机制
